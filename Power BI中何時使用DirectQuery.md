---
up: 
related: 
year: 
created: 2025-06-09
tags: 
type: "[[Article]]"
---
[玩轉DP-500考試：Power BI中何時使用DirectQuery！](https://www.toolify.ai/tw/ai-news-tw/%E7%8E%A9%E8%BD%89dp500%E8%80%83%E8%A9%A6power-bi%E4%B8%AD%E4%BD%95%E6%99%82%E4%BD%BF%E7%94%A8directquery-580508)



## **直接查詢在Power BI中的使用指南**

欢迎大家收看本次的视频，我是Data Mozart的Nicola。在本视频中，我将与大家详细讨论直接查詢（Direct Query）在Power BI中的使用情境和最佳实践。我们将深入了解直接查詢是什么，以及在什么情况下应该使用直接查詢。此外，我还会分享一些提升直接查詢效能的技巧。让我们一起来深入了解吧！

### **1. 什麼是直接查詢**

直接查詢是一种从数据源直接获取数据的方法。与导入模式（Import Mode）不同，直接查詢不会将数据存储在内存中，而是每次在查询时都直接从数据源中获取数据。这意味着数据始终保留在其原始来源中，无论是在查询执行前、期间还是之后。

### **2. 使用直接查詢的情境**

直接查詢在以下三种情况下是合适的选择：

- 数据模型的大小超过Power BI文件的最大大小限制。
- 需要实时或准实时的数据。
- 数据源的安全策略在数据源端定义。

首先，如果您的数据模型非常庞大，超出了Power BI Pro许可证的文件最大限制（1 GB）或Power BI Premium许可证的文件最大限制（10 GB），那么直接查詢模式是您的选择。以百亿行数据表为例，如果您仅仅是将其导入到Tabular模型中，可能会导致Tabular模型无法容纳。

其次，如果您需要实时或准实时的数据，那么直接查询模式是必不可少的。因为导入模式只会定期刷新数据快照，无法提供实时的数据更新，而直接查詢模式能够直接从源头获取最新数据。

最后，数据源的安全策略在数据源端定义时，使用直接查询模式能够确保安全规则在数据源端生效。这是因为报表使用者的凭据将被传递到底层数据源，并在那里应用安全规则。

### **3. 使用直接查詢的最佳實踐**

使用直接查询模式时，以下是几个最佳实践值得注意：

**1. 数据源的性能优化** 直接查询的整体用户体验在很大程度上取决于底层数据源的性能。因此，需要确保数据源针对分析工作负载进行了优化，包括适当的索引、数据完整性和持久化对象的创建等。

- 【Tips】添加适当的索引来支持复杂的查询。对于大型分析工作负载，考虑创建列存储索引。优秀的B-tree索引也可以改善性能。与数据库管理员协商讨论以获取帮助。
- 【Tips】确保源数据库中的维度表包含正确的键，并且这些键与事实表相关联。这样可以确保事实表中的每个键值都在维度表中具有相应的值。
- 【Tips】尝试在源数据库中创建持久化对象，以将所有聚合、转换和计算结果物化在一个特定的表或索引视图中。这样Power BI就可以从一个地方获取所有数据，而不需要在每次执行查询时执行复杂的跨多个表的操作。

**2. 避免复杂的Power Query转换** 每次对数据模型应用转换时，Power Query都会生成查询并将其发送到数据源。因此，尽量避免在Power Query上应用复杂的转换。如果需要使用计算列，尽量将计算列的创建放在数据源一侧，并保持其持久化。此外，避免复杂的DAX度量。尽量在源数据库上进行计算操作，以减少Power BI生成的昂贵SQL查询的数量。

**3. 并行度的限制** 您可以定义直接查询可以同时打开的最大连接数。通过限制并行度，可以减少对数据源的负荷。请根据实际情况调整并配置最大连接数的参数。

### **4. 直接查詢的優點**

- 实时或准实时的数据更新
- 避免数据模型过大的问题
- 安全规则在数据源端生效

### **5. 直接查詢的缺點**

- 数据源的性能直接影响用户体验
- 需要确保数据源进行了适当的优化
- 查询效率受限于数据源本身的质量和性能

### **6. 直接查詢的效能優化技巧**

- 数据源的性能优化
- 避免复杂的Power Query转换
- 并行度的限制

### **7. 與使用者溝通關於直接查詢的重要性**

与使用者进行沟通非常重要，特别是在使用直接查询模式时。解释导入模式和直接查询模式之间的区别以及使用每种模式的收益和缺点非常重要。

### **8. 避免使用直接查詢的情況**

在某些情况下，避免使用直接查询模式可能是更好的选择。例如：

- 数据模型小且可以容纳在Power BI文件中
- 不需要实时或准实时的数据更新
- 源数据库的性能无法满足分析工作负载的要求

### **9. 直接查詢與其他資料連接模式的比較**

直接查询模式与其他数据连接模式，如导入模式和混合模式，有着不同的特点和应用场景。比较这些模式的优缺点可以帮助您选择合适的数据连接模式。

### **10. 總結**

综上所述，直接查询模式是一种在Power BI中获取实时或准实时数据的有效方式。然而，它需要对底层数据源进行优化，并与用户进行良好的沟通，以确保良好的用户体验。在选择数据连接模式时，需要根据具体需求进行综合考虑，并选择最适合的方式。

感谢您观看本视频。如果您觉得这个视频对您有所帮助，请给予我们点赞并订阅Data Mozart频道，以便获取更多与Power BI和数据相关的视频。下次再见，继续享受Power BI的乐趣吧！

---

FAQ:

Q: 什么是直接查詢（Direct Query）模式？ A: 直接查詢模式是Power BI中一种从数据源直接获取数据的模式，避免了将数据加载到内存中的步骤，能够提供实时或准实时的数据更新。

Q: 为什么要使用直接查詢模式？ A: 使用直接查詢模式可以避免数据模型过大的问题，提供实时或准实时的数据更新，并保证在数据源端定义的安全规则生效。

Q: 如何优化直接查詢的性能？ A: 优化直接查询的性能可以从多个方面入手，包括优化数据源的性能、避免复杂的Power Query转换、限制并行度等。

Q: 在什么情况下不适合使用直接查詢模式？ A: 不适合使用直接查询模式的情况包括数据模型较小且可以容纳在Power BI文件中、不需要实时或准实时的数据更新，以及源数据库无法满足分析工作负载的要求的情况。

Q: 直接查詢模式与其他数据连接模式有什么区别？ A: 直接查詢模式与其他数据连接模式，如导入模式和混合模式，有着不同的特点和应用场景。直接查询模式提供了实时或准实时的数据更新，但对底层数据源的性能要求较高。
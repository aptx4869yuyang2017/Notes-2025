---
up:
  - "[[PowerBI DAX 概念 Concept]]"
related:
  - "[[DAX 权威指南 - CH15 高级关系]]"
created: 2024-06-26
tags:
  - domain/powerbi
---
[网页参考](https://www.sqlbi.com/articles/strong-and-weak-relationships-in-power-bi/)
书本参考：权威指南CH13 - 理解物理关系

## 结论

![image.png](https://s1.vika.cn/space/2025/06/10/dbed64d903c949b186fefb69f1c58131)


- 常规关系/强关系：引擎知道关系的 **一端** 包含唯一值
- 有限关系/弱关系：不能确认唯一值

- 岛间关系永远是弱关系

- 有限关系/弱关系问题：
	- 空白行，不匹配数据
	- 没有拓展表
	- 性能差


![750fcf1a6e0446d0b36acf40674950a6|591](https://s1.vika.cn/space/2024/06/25/750fcf1a6e0446d0b36acf40674950a6)


## 原因

- 陆岛关系：因为 DAX 引擎无法获取 DirectQuery 模式下的数据情况，所以无法对数据做出任何假设，无法确保关系目标的主键值唯一
- 岛内关系：大陆以外的岛内关系不需要 DAX 引擎处理关系，只需要向数据源发送 Join/Where 语句，DAX引擎信任数据源引擎
- 岛间关系：不同数据源之间，还是需要 DAX引擎解析关系，没法推断主键唯一，所以还是 **有限关系**

## 有限关系产生的现象

### 1 因数据缺失产生的值，不会在有限关系中强制关联

![97af79f95be545cca6171dc083eea2c9|541](https://s1.vika.cn/space/2024/06/26/97af79f95be545cca6171dc083eea2c9)

![737049060bbe4744bbc687ba840f48c5|318](https://s1.vika.cn/space/2024/06/26/737049060bbe4744bbc687ba840f48c5)

当两个表通过强关系连接时，位于关系 1 端的表可能包含附加的空行，这样做是为了 防止关系出现无效记录。也就是说，如果强关系中位于多 端的表包含了1 端表中没有的值 ，那 么DAX就 会在 1 端的表中添加一个空行 。 在第3 章中我 们 已 经 进 一 步 解 释 过这 种行为。而这种附加的 空行永远不会被添加到弱关系中。
### 2 有限关系不会生成拓展表


### 3 常规关系性能更好

因为 在数据刷新的时候，就会对 常规关系进行 **物化操作**